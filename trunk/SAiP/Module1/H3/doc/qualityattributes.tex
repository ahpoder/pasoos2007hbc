%%%
% Quality Attributes
%%%
\section{Quality Attributes -- Beer Web Store}

Consider the following main use case for a Beer Web Store for specialty
beers:

\begin{quote}
  The customer browses the beer catalogue for descriptions and
  reviews. The customer selects appropriate beers for purchase and
  these are added to his shopping basket. When the customer checks
  out, payment is validated through the payment service
\end{quote}
The main architectural drivers are considered to be performance and
availability. Moreover, the software architect for the system has
created the following box-and-line drawing documenting his initial
ideas of the system:
\begin{figure}[h!]
  \centerline{\epsfig{figure=figures/beerstore,scale=0.30,clip=true}}
\end{figure}

\subsection{Quality Attributes - Question 1}

\begin{question}
Describe technique(s) for architectural requirements capture
that are applicable to the above case
\end{question}

Defining an architectures requirements is not like defining the functional requirements; actually many software professionals believe that they are indeed orthogonal. This is supported by the fact that a set of functional requirements may be implemented by a number of different architectures.

Finding out the requirements for the architecture is therefore more a matter of finding out what is important, more than it is to define what the product must do. The people who are able to define what is important to the architecture is naturally the stakeholders that the architecture affects, i.e. the owner, the user, the developer, the special interest groups, etc. Getting all of these peoples, often conflicting, requirements assembled and, even more importantly, prioritised, can be a difficult task. One way of doing so is to define scenarios, like the one mentioned above, and then having the stakeholders vote at the importance of the scenario. 

Naturally in order for the scenarios to be able to be used to clarify the architecture it must be possible quantify them, and place them in different categories. This requires that the above scenario(s) are extended with e.g. response time, how many times the user should be able to perform an operation before experiencing a fault (down-town). 

Once the scenarios are clarified and voted on, then the top priority scenarios may be formalized and it may be determined which quality attribute(s) they involve. For examples sake lets asume that the above scenario was selected as top priority.

\fixme{Insert table with quality attribute breakdown}

As it may be seen, the scenario(s) focus primarily on \emph{Availability} (how rare should it be that a user experience non-resonsiveness and how many simultanious users can the system support), \emph{Usability} (how easy should it be for the user to cancel a transaction halfway through and how easy should it be to pick up a previous transaction), \emph{Performance} (how big a delay can the user expect when performing an operation like a lookup in the database), \emph{Security} (how to avoid someone using stolen credit cards and also prevent a "hacker" from stealing the credit card information either durig the transaction or from the Beer Web Store's database.

The scenario does not include all aspects of the architecture, though. Another scenario may deal with how long it may take to alter a product built on the architecture (\emph{Modifiability}) - this may be particularly interesting to the owner. Another quality that has not been dealt with in the mentioned scenario(s), is how easy it is to check a product developed based on the architecture for faults (\emph{Testability}), which is of great interest to the owner and the developers.

Naturally there are many more scenario required in order to properly cover all aspects of the quality properties. 

\subsection{Quality Attributes - Question 2}

\begin{question}
Give feasible architectural requirements for availability
and performance for the Beer Web Store using such techniques (at
least one for each quality attribute)
\end{question}

The scenarios may be further clarified in order to include the aspects of availability and performance, as shown below. 

\begin{quote}
The customer browses the beer catalogue for descriptions and reviews and receives the result within 5 seconds 99\% of the time, 30 seconds 0,9\% of the time and more than 30 seconds 0,1\% of the time. 

The customer selects appropriate beers for purchase and these are added to his shopping basket. When the customer checks out, payment is validated through the payment service within 30 seconds.
\end{quote}

\fixme{Answer question 2.2}

\subsection{Quality Attributes - Question 3}

\begin{question}
Argue how tactics and/or styles may be used to resolve the requirements
\end{question}

As we have only defined the Availability and Performance requirements, only these will be dealt with here, yet naturally requirements concerning the other quality attributes must also be handled.

\subsubsection{Availability}
Availability has two main concerns; finding out that a resource is unavailable and if it is, then restart or switch to another resource. 

Finding out if a resource is down may be done using one of the fault detection tactice; ping/echo, heartbeat or exception. Due to the loose coupling between the client (browser) and the server, the exception solution is not benificial. Since it may be assumed that the supervising process (remotely deployed) (the process monitoring if the server is down) is stable, then a heartbeat is sufficient to ensure availability, meaning that the web-server will issue a heart-beat every e.g. 1 second to a maintance process on the same or another machine, and if one (or perhaps more) heartbeats is missed then the maintanance service can act.

The proper response to a faulty server may be many things, as defined by the tactics group \emph{fault recovery}. As the requirement for availability stipulated a three stage fault recovery, the server or servers (as it may be required to have multiple serves to do load-balancing, depending on how many users must be supported) can service the 5 second requirement, and tehn if an error occur (as detected by the heartbeat) then restart or swap to another server/database in 30 seconds. As 30 seconds is insufficient to bott a webserver and a database, the Spare tactic would be insufficient. At the same tiem having Active redundancy would be over-kill, as a this kind of immidiat switch-over is not required. For these reasons Passive Redundancy is sufficient.

As it is an internet system, it will also be sufficient to simply restart the session, and no \emph{Shadow}, \emph{State resynchronization} or \emph{Rollback} is needed in the main web server. The user may experience beeing thrown back to the main page, yet this is deemed acceptable, under availability and performance, yet it may not be in Usability. During a payment transaction, however, it must be ensured that the purchase is either completed or not-completed - halfway completed is not acceptable. for this it will be benificial to use the \emph{Rollback} tactic on the \emph{Basket} component.

Finally a web-server may be deployed multiple times on teh same machine, allowing for the recovery or prevention of the lesser faults, by simply re-spawning the process that has become non-responsive, utilizing the \emph{Process Monitor} tactic. This is e.g. done by the Apache-server.

As it is not only the web server which may become non-responsive, it is also the database, it is also required to monitor the database. However, as a non-responsive data-base may be discovered by a non-responsive server, it is possible to use the ping-echo tactic with the database, and only perform the ping-echo if the server becomes non-responsive, to find out how much must be restarted (only the server or both the server and the database). 
Depending on the binding between teh database and the server, it may also be possibel to use the exceptions tactic between teh server and the database, so the server itself can restart the database, if an exception occur in a call to the database. 

\subsubsection{Performance}



\fixme{Answer question 3.3}

\subsection{Quality Attributes - Question 4}

\begin{question}
Discuss where Service-Oriented Architecture can play a role
with respect to the Beer Web Store? Consider the quality implications
\end{question}

\fixme{Answer question 3.4}

\subsection{Quality Attributes - Question 5}

\begin{question}
Reflect upon what the role of quality attributes in software
architecture is
\end{question}

\fixme{Answer question 3.5}

